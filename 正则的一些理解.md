title: 正则的一些理解
date: 2014-11-14 21:50:22
tags: regex
---

今天写到这里，是想总结一下，自己重新学习正则表达式之后，对它的一个全新的认识。我想描述一个中心思想，学习任何东西，编程，音乐，基础是非常important的，就好像吉他里基础不在于认识六线谱而是在于节拍。

##从人类的角度来阅读正则

在写代码示例之前，我描述一个正确的阅读正则表达式的方式，也许有点反人类，从右往左读。我很喜欢正则表达式，就像我喜欢python一样，因为它给了我一个很快速处理字符的能力。python中也有很多高效处理字符串的方式，比如步距，比如正则，嘿嘿。

import re

g = re.search('\d+(\.\d*)?','0.2556223.556655')

g.group(0)

我们来看一个搜索浮点数的正则，我们从右往左看，把这一个正则表达式分割成三分，\d+，(\.\d*)，?。我们知道?描述的是出现零次或一次，在这里阅读的时候，是描述(\.\d*)这一个组会出现零次或一次。我们再看这个组中的描述\.用来描述.，\d用来描述0-9的数字，而*描述的是出现零次或多次，我们组合起来看，这个组就是来描述.后面的数字会出现零次或多次。\d依然是用来描述0-9的数字，+用来描述出现一次或多次。

到这里，我们把这三个部分，从右往左看，组合起来，用人类阅读的角度去描述它：小数点后面出现的数字是多次的，而这一个部分只能出现一次或零次，并且在小数点之前可以出现一次或多次的数字。
<!--more-->
那么让我们看一个搜索邮件的正则：

import re

g = re.search('\w+@\w+\.com','ww@ww.com')

g.group(0)

依然在描述它时，分割开来，从右往左去描述，.com的字符串，\w描述任意字符，+的左边为\w，描述为出现一次或多次的字符。@的字符串，+的左边为\w，描述为出现一次或则多次的字符。

我依然把这三个部分，组合起来阅读，描述为：.com的左侧允许出现一次或多次的字符，左侧连接@，并且@的左侧允许出现一次或多次的字符。

升级一下，匹配存在子域的邮件：

import re

g = re.search('\w+@\w+(\.\w+)?\.com','ww@ww.ww.com')

g.group(0)

从右往左来描述：.com的字符串，?左侧的(\.\w+)描述为：(.后的字符可能出现一次或多次)但是它只能出现一次或零次。\w+，描述为字符串一次或多次。@的字符串，\w+，依然描述为字符串出现一次或多次。

把这几个部分合起来，描述：.com的左侧允许出现[.一次或多次的字符]= a，而a左侧[允许出一次或多次的字符] = b，b的左侧为@，@的左侧允许出现一次或多次的字符。

这样，一段复杂的表达式，往往可以通过分解的步骤来阅读它，但是，它需要基础，基础在于对这些特殊字符，元，的了解。再复杂的正则，也可以从右往左来阅读它，并用人类的语言，写在纸上，这会是一个非常棒的方式。

我喜欢，写在纸上，它让我对这一个部分，非常的清晰，了解，不信，可以试试？

**注释：因为是python的正则，所以去掉了一些特殊的**

##认识常用的基础

字符 | 描述

.|匹配任意字符，除(\n)之外的字符

\ | 转意字符

[...] | 字符集

0-9|匹配0-9的数字

a-z A-Z|匹配从a到z的字符

预定义字符集 | 描述

\d | 匹配数字

\w | 匹配字符

\s | 匹配空格符

数量词 | 描述

\* | 出现零次或多次

\+ | 出现一次或多次

? | 出现零次或一次

{n} | 出现n次

{n,m} | 出现n次或m次

边界匹配 | 描述

^ | 在开始位置

$ | 在结束位置

逻辑 | 描述

|  逻辑或

()组 为一个子组，必须存在，才匹配

[]列 可以为出现任意一个，都匹配
